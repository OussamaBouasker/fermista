{% extends 'base.html.twig' %}
{% block content %}
	<!DOCTYPE html>
	<html>
		<head>
			<meta charset="UTF-8">
			<title>
				{% block title %}Welcome!
				{% endblock %}
			</title>
			<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>">
			{% block stylesheets %}
				{{ parent() }}

			{% endblock %}
			<style>
				.chart-container {
					position: relative;
					margin: auto;
					height: 400px; /* Ajustez la hauteur selon vos besoins */
					width: 100%;
				}
				.card {
					border-radius: 10px;
					box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
					border: none;
				}
				.card-title {
					font-size: 1.5rem;
					font-weight: bold;
					color: #333;
					margin-bottom: 20px;
				}
			</style>
		</head>
		<body>
			{% block body %}

				<div class="row">
					<div class="col-sm-6 col-xl-4 stretch-card grid-margin">
						<div class="card color-card-wrapper">
							<div class="card-body">
								<img class="img-fluid card-top-img w-100" src="{{asset('Back/images/dashboard/image_8.avif')}}" alt="">
								<div class="d-flex flex-wrap justify-content-around color-card-outer">
									<div class="col-6 p-0 mb-4">
										<div class="color-card primary m-auto">
											<i class="mdi mdi-clock-outline"></i>
											<p class="fw-semibold mb-0">Clients</p>
											<span class="small">{{ numberOfClients }}
											</span>
										</div>
									</div>
									<div class="col-6 p-0 mb-4">
										<div class="color-card bg-success  m-auto">
											<i class="mdi mdi-tshirt-crew"></i>
											<p class="fw-semibold mb-0">Agriculteurs</p>
											<span class="small">{{ numberOfAgricultors }}
											</span>
										</div>
									</div>
									<div class="col-6 p-0">
										<div class="color-card bg-info m-auto">
											<i class="mdi mdi-trophy-outline"></i>
											<p class="fw-semibold mb-0">Formateurs</p>
											<span class="small">{{ numberOfFormateurs }}
											</span>
										</div>
									</div>
									<div class="col-6 p-0">
										<div class="color-card bg-danger m-auto">
											<i class="mdi mdi-presentation"></i>
											<p class="fw-semibold mb-0">Véterinaires</p>
											<span class="small">{{ numberOfVeterinaires }}
											</span>
										</div>
									</div>

								</div>
							</div>
						</div>
					</div>
					<div class="col-sm-6 col-xl-4 stretch-card grid-margin">
						<div class="card">
							<div
								class="row">
								<!-- Graphique pour les réclamations -->
								<div class="col-xl-6 stretch-card grid-margin">

									<div class="card-body">

										<div class="chart-container">
											<canvas id="reclamationStatusChart" width="300" height="400"></canvas>

										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-sm-6 col-xl-4 stretch-card grid-margin">
						<div class="card">
							<div class="card-body">
								<div class="d-flex border-bottom mb-4 pb-2">
									<div class="hexagon">
										<div class="hex-mid hexagon-warning">
											<i class="mdi mdi-clock-outline"></i>
										</div>
									</div>
									<div class="ps-4">
										<h4 class="fw-bold text-warning mb-0">Total des réclamations</h4>
										<h6 class="text-muted">{{ totalReclamations }}
										</h6>
									</div>
								</div>
								<div class="d-flex border-bottom mb-4 pb-2">
									<div class="hexagon">
										<div class="hex-mid hexagon-danger">
											<i class="mdi mdi-account-outline"></i>
										</div>
									</div>

									<div class="ps-4">
										<h4 class="fw-bold text-danger mb-0">Total des utilisateurs</h4>
										<h6 class="text-muted">{{ totalUsers }}</h6>
									</div>
								</div>
								<div class="d-flex border-bottom mb-4 pb-2">
									<div class="hexagon">
										<div class="hex-mid hexagon-success">
											<i class="mdi mdi-laptop"></i>
										</div>
									</div>
									<div class="ps-4">
										<h4 class="fw-bold text-success mb-0">Total des workshops</h4>
										<h6 class="text-muted">{{ totalWorkshops }}</h6>
									</div>
								</div>
								<div class="d-flex border-bottom mb-4 pb-2">
									<div class="hexagon">
										<div class="hex-mid hexagon-info">
											<i class="mdi mdi-clock-outline"></i>
										</div>
									</div>
									<div class="ps-4">
										<h4 class="fw-bold text-info mb-0">Total des réservations</h4>
										<h6 class="text-muted">{{ totalReservations }}</h6>
									</div>
								</div>

								<div class="d-flex">
									<div class="hexagon">
										<div class="hex-mid hexagon-primary">
											<i class="mdi mdi-timer-sand"></i>
										</div>
									</div>
									<div class="ps-4">
										<h4 class="fw-bold text-primary mb-0">Total des consultions</h4>
										<h6 class="text-muted mb-0">{{ totalConsultations }}</h6>

									</div>


								</div>

							</div>
						</div>
					</div>

				</div>

				<div class="row">

					<div
						class="row">
						<!-- Graphique en camembert -->
						<div class="col-xl-6 stretch-card grid-margin">
							<div class="card">
								<div class="card-body">
									<div class="chart-container">
										<canvas id="userRolesChart" width="400" height="400"></canvas>
									</div>
								</div>
							</div>
						</div>

						<!-- Graphique en barres -->
						<div class="col-xl-6 stretch-card grid-margin">
							<div class="card">
								<div class="card-body">
									<div class="chart-container">
										<canvas id="userRolesBarChart" width="400" height="400"></canvas>
									</div>
								</div>
							</div>
						</div>
					</div>

				</div>

			</body>
		</html>
	</div>
</div></div></div>{% block javascripts %}{{ parent() }}{{ encore_entry_script_tags('app') }}{# Charger Chart.js via Webpack Encore #}<script>
document.addEventListener('DOMContentLoaded', function () { // Graphique en camembert
const ctxPie = document.getElementById('userRolesChart').getContext('2d');
const userRolesPieChart = new Chart(ctxPie, {
type: 'pie', // Type de graphique (camembert)
data: {
labels: [
'Clients',
'Agriculteurs',
'Formateurs',
'Vétérinaires',
'Admins'
], // Rôles
datasets: [
{
label: 'Nombre d\'utilisateurs',
data: [
{{ numberOfClients }}, // Nombre de clients
{{ numberOfAgricultors }}, // Nombre d'agriculteurs
{{ numberOfFormateurs }}, // Nombre de formateurs
{{ numberOfVeterinaires }}, // Nombre de vétérinaires
{{ numberOfAdmins }} // Nombre d'administrateurs

],
backgroundColor: [
'rgba(255, 99, 132, 0.8)', // Rouge
'rgba(54, 162, 235, 0.8)', // Bleu
'rgba(255, 206, 86, 0.8)', // Jaune
'rgba(75, 192, 192, 0.8)', // Turquoise
'rgba(204, 153, 255, 0.8)' // Violet pastel
],
borderColor: [
'rgba(255, 99, 132, 1)',
'rgba(54, 162, 235, 1)',
'rgba(255, 206, 86, 1)',
'rgba(75, 192, 192, 1)',
'rgba(204, 153, 255, 0.8)', // Violet pastel
],
borderWidth: 2,
shadowOffsetX: 3,
shadowOffsetY: 3,
shadowBlur: 10,
shadowColor: 'rgba(0, 0, 0, 0.3)'
}
]
},
options: {
responsive: true,
maintainAspectRatio: false,
plugins: {
legend: {
display: true,
position: 'top',
labels: {
font: {
size: 14,
family: 'Arial, sans-serif'
},
color: '#333'
}
},
title: {
display: true,
text: 'Proportion des utilisateurs par rôle',
font: {
size: 18,
family: 'Arial, sans-serif'
},
color: '#333',
padding: 20
},
tooltip: {
enabled: true,
backgroundColor: 'rgba(0, 0, 0, 0.8)',
titleFont: {
size: 16
},
bodyFont: {
size: 14
},
footerFont: {
size: 12
}
}
},
animation: {
duration: 1000,
easing: 'easeInOutQuart'
}
}
});

// Graphique en barres
const ctxBar = document.getElementById('userRolesBarChart').getContext('2d');
const userRolesBarChart = new Chart(ctxBar, {
type: 'bar', // Type de graphique (barres)
data: {
labels: [
'Clients',
'Agriculteurs',
'Formateurs',
'Vétérinaires',
'Admins',
], // Rôles
datasets: [
{
label: 'Nombre d\'utilisateurs',
data: [
{{ numberOfClients }}, // Nombre de clients
{{ numberOfAgricultors }}, // Nombre d'agriculteurs
{{ numberOfFormateurs }}, // Nombre de formateurs
{{ numberOfVeterinaires }}, // Nombre de vétérinaires
{{ numberOfAdmins }} // Nombre d'administrateurs
],
backgroundColor: [
'rgba(255, 99, 132, 0.8)', // Rouge
'rgba(54, 162, 235, 0.8)', // Bleu
'rgba(255, 206, 86, 0.8)', // Jaune
'rgba(75, 192, 192, 0.8)', // Turquoise
'rgba(204, 153, 255, 0.8)' // Violet pastel
],
borderColor: [
'rgba(255, 99, 132, 1)',
'rgba(54, 162, 235, 1)',
'rgba(255, 206, 86, 1)',
'rgba(75, 192, 192, 1)',
'rgba(204, 153, 255, 0.8)', // Violet pastel
],
borderWidth: 2,
shadowOffsetX: 3,
shadowOffsetY: 3,
shadowBlur: 10,
shadowColor: 'rgba(0, 0, 0, 0.3)'
}
]
},
options: {
responsive: true,
maintainAspectRatio: false,
plugins: {
legend: {
display: true,
position: 'top',
labels: {
font: {
size: 14,
family: 'Arial, sans-serif'
},
color: '#333'
}
},
title: {
display: true,
text: 'Distribution des utilisateurs par rôle',
font: {
size: 18,
family: 'Arial, sans-serif'
},
color: '#333',
padding: 20
},
tooltip: {
enabled: true,
backgroundColor: 'rgba(0, 0, 0, 0.8)',
titleFont: {
size: 16
},
bodyFont: {
size: 14
},
footerFont: {
size: 12
}
}
},
scales: {
y: {
beginAtZero: true,
grid: {
color: 'rgba(0, 0, 0, 0.1)'
},
ticks: {
font: {
size: 14
},
color: '#333'
}
},
x: {
grid: {
color: 'rgba(0, 0, 0, 0.1)'
},
ticks: {
font: {
size: 14
},
color: '#333'
}
}
},
animation: {
duration: 1000,
easing: 'easeInOutQuart'
}
}
});
});
document.addEventListener('DOMContentLoaded', function () { // Graphique pour les réclamations par statut
const ctxReclamation = document.getElementById('reclamationStatusChart').getContext('2d');
const reclamationStatusChart = new Chart(ctxReclamation, {
type: 'bar', // Type de graphique (barres)
data: {
labels: [
'Pending', 'Confirmed', 'Canceled'
], // Statuts
datasets: [
{
label: 'Nombre de réclamations',
data: [
{{ reclamationCounts['Pending'] }}, // Nombre de réclamations en attente
{{ reclamationCounts['Confirmed'] }}, // Nombre de réclamations confirmées
{{ reclamationCounts['Canceled'] }} // Nombre de réclamations annulées
],
backgroundColor: [
'rgba(255, 99, 132, 0.8)', // Rouge pour Pending
'rgba(54, 162, 235, 0.8)', // Bleu pour Confirmed
'rgba(75, 192, 192, 0.8)', // Turquoise pour Canceled
],
borderColor: [
'rgba(255, 99, 132, 1)', 'rgba(54, 162, 235, 1)', 'rgba(75, 192, 192, 1)',
],
borderWidth: 2,
shadowOffsetX: 3,
shadowOffsetY: 3,
shadowBlur: 10,
shadowColor: 'rgba(0, 0, 0, 0.3)'
}
]
},
options: {
responsive: true,
maintainAspectRatio: false,
plugins: {
legend: {
display: true,
position: 'top',
labels: {
font: {
size: 14,
family: 'Arial, sans-serif'
},
color: '#333'
}
},
title: {
display: true,
text: 'Statut des réclamations',
font: {
size: 18,
family: 'Arial, sans-serif'
},
color: '#333',
padding: 20
},
tooltip: {
enabled: true,
backgroundColor: 'rgba(0, 0, 0, 0.8)',
titleFont: {
size: 16
},
bodyFont: {
size: 14
},
footerFont: {
size: 12
}
}
},
scales: {
y: {
beginAtZero: true,
grid: {
color: 'rgba(0, 0, 0, 0.1)'
},
ticks: {
font: {
size: 14
},
color: '#333'
}
},
x: {
grid: {
color: 'rgba(0, 0, 0, 0.1)'
},
ticks: {
font: {
size: 14
},
color: '#333'
}
}
},
animation: {
duration: 1000,
easing: 'easeInOutQuart'
}
}
});
});</script>{% endblock %}{% endblock %}</body></html>{% endblock %}
